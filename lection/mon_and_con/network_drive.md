# Работа с сетевыми дисками

## Сетевые диски в сетях Microsoft

При использовании **MS AD** практически всегда **создаётся** *один* или *несколько* **сетевых дисков** для **хранения информации пользователей** на сервере

**Плюсы** такого хранения:

- **надёжность** за счёт регулярного **резервного копирования**
- **данные пользователя не привязаны к конкретной рабочей станции**

Для **обмена** **данными** с сервером при использовании сетевых дисков применяется **протокол SMB**. **Изначально** **протокол SMB** работал **поверх серей IPX/SPX** с использованием **NetBIOS**. В 2012 году вышла версия **протокола 3.0**, **расширяющая** его **возможности** под современные требования, но **без черезмерного усложнения**, как в первой версии. В версии **протокола 1.0** и используемых в ней **протоколах NTLM** найдено **множество** **уязвимостей**, которые уже **не могут быть** **исправлены**. **Единственное решение** этих проблем это **переход** на **новую версию**

## Создание сетевых дисков в Windows Server 2012r2

Для **создания** **сетевых дисков** можно воспользоваться **двумя путями**:

- **использование** **контекстного меню** на имени папки
- **использование** **Server Manager**

**Внешнее имя** **сетевого диска** **не связано** с **именованием** **внутри** сервера(это важно, ведь на **сервере** мы можем **обращаться** к **внутреннему имени**, но вот **вне сервера** уже по этому **имени** уже **не сможем**). **Существуют** **требования** к **имени** объектов в **UNC** **пути**. Так что **спокойно** может **подойти** вариант с *цифрами*, *буквами* и *символами* `_` и `-`

Чтобы **настроить** **права** на сетевой диск, нужно **сначало** **найти папку** отвечающую за сетевой диск, как найдем **ПКМ->properties->share**. Дальше **2 варианта** **настройки**: *простой* и *расширенный*. При **названии**, заканчивающемся на **символ** `$` **сетевой ресурс** **не будет виден** при просмотре сетевого окружения, но будет **доступен** **при прямом обращении** по имени

Пример пути:

`\\server.fqdn\share_name`

**При указании** **прав доступа** можно использовать как **имена** конкретных *пользователей*, так и *группы*. При использовании **MS AD** на **всех** **компьютерах** домена **общая база** *пользователей* и *групп*. Стоит отметить то, что если вы **зашли** под **логином** `user`, то и **права** на **сетевой ресурс** будут от `user`

**Для управлением** **правами** доступа внутри сетевого диска понадобится **менять** **права** **на доступ** к **объектам** файловой системы. Дополнительно **можно создавать** **квоты**. Для **настройки** **сетевых дисков** используется **File Server Resourse Manager**

## Создание сетевых дисков с использованием протокола SMB в GNU/Linux

Для **создания** **сетевых дисков** в **GNU/Linux** можно использовать **два протокола** и **две отдельные службы** для них:

- **NFS**(его использую редко, поэтому перейдем у следующиму)
- **samba** - в нее входит **samba** и **winbind**(**отвечает** за **пространство** **имён** пользователей и их **аутентификацию**)

**Текущая версия** **samba** способна работать в **MS AD** в качестве **файлового сервера** **практически** **без ограничений**. К **специфическим особенностям** **samba** следует отнести **отсутствие** **графических интерфейсов** для создания сетевых дисков и необходимость ручной настройки конфигурационных файлов для начал работы с **MS AD**(**дальнейшую настройку** можно сделать и с **клиентов** **MS Windows**)
